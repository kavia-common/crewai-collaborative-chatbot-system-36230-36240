{"is_source_file": true, "format": "Python", "description": "This source file defines API views for a Django backend, including endpoints for health checks, managing chat sessions, retrieving chat history and state, and handling message sending with a two-agent collaboration process.", "external_files": ["django.shortcuts", "drf_yasg.utils", "drf_yasg", "rest_framework", "rest_framework.decorators", "rest_framework.response", ".models", ".serializers", ".services"], "external_methods": ["get_object_or_404", "swagger_auto_schema", "openapi.Schema", "status", "viewsets.ModelViewSet", "api_view", "action", "Response", "ChatSession.objects.all", "Message.objects.filter", "ChatAgentAssignment.objects.filter", "ChatSessionSerializer", "MessageSerializer", "run_two_agent_collaboration"], "published": ["health", "ChatSessionViewSet", "MessageViewSet"], "classes": [{"name": "ChatSessionViewSet", "description": "A viewset managing CRUD operations, history retrieval, state snapshot, and messaging for chat sessions."}, {"name": "MessageViewSet", "description": "A read-only viewset providing access to messages."}], "methods": [{"name": "health(request)", "description": "A simple endpoint to check server health status.", "scope": "", "scopeKind": ""}, {"name": "create(self, request, *args, **kwargs)", "description": "Creates a new chat session.", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"name": "history(self, request, session_id=None)", "description": "Returns the message history for a specific chat session.", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"name": "state(self, request, session_id=None)", "description": "Returns the current state snapshot of a chat session, including assignments and message count.", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"name": "send(self, request, session_id=None)", "description": "Handles user message input and triggers two-agent collaboration, returning the resulting messages.", "scope": "ChatSessionViewSet", "scopeKind": "class"}], "calls": ["get_object_or_404", "run_two_agent_collaboration", "MessageSerializer", "ChatSessionSerializer", "ChatSession.objects.all", "Message.objects.filter", "ChatAgentAssignment.objects.filter"], "search-terms": ["API views", "ChatSession", "two-agent collaboration", "history endpoint", "session state", "send message", "health check"], "state": 2, "file_id": 17, "knowledge_revision": 53, "git_revision": "35a6ac2c0f14471e71851183e5088af2119158e0", "revision_history": [{"35": "35a6ac2c0f14471e71851183e5088af2119158e0"}, {"53": "35a6ac2c0f14471e71851183e5088af2119158e0"}], "ctags": [{"_type": "tag", "name": "ChatSessionViewSet", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^class ChatSessionViewSet(viewsets.ModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MessageViewSet", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^class MessageViewSet(viewsets.ReadOnlyModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    def create(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^def health(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "history", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    def history(self, request, session_id=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, session_id=None)", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "lookup_field", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    lookup_field = \"session_id\"$/", "language": "Python", "kind": "variable", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    queryset = ChatSession.objects.all().order_by(\"-created_at\")$/", "language": "Python", "kind": "variable", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    queryset = Message.objects.all().order_by(\"created_at\", \"id\")$/", "language": "Python", "kind": "variable", "scope": "MessageViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "send", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    def send(self, request, session_id=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, session_id=None)", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    serializer_class = ChatSessionSerializer$/", "language": "Python", "kind": "variable", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    serializer_class = MessageSerializer$/", "language": "Python", "kind": "variable", "scope": "MessageViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    def state(self, request, session_id=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, session_id=None)", "scope": "ChatSessionViewSet", "scopeKind": "class"}], "hash": "be9002e1c192ebc0db88a58cceb69b70", "format-version": 4, "code-base-name": "chatbot_backend", "filename": "chatbot_backend/api/views.py", "fields": [{"name": "lookup_field = \"session_id\"", "scope": "ChatSessionViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = ChatSession.objects.all().order_by(\"-created_at\")", "scope": "ChatSessionViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = Message.objects.all().order_by(\"created_at\", \"id\")", "scope": "MessageViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = ChatSessionSerializer", "scope": "ChatSessionViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = MessageSerializer", "scope": "MessageViewSet", "scopeKind": "class", "description": "unavailable"}]}