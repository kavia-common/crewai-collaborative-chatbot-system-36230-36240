{"is_source_file": true, "format": "Python", "description": "This file defines API views using Django REST Framework for a chat system. It includes endpoints for health check, managing chat sessions (create, retrieve history, get state, send messages with two-agent collaboration), and read-only access to messages. The code also includes Swagger/OpenAPI annotations for documentation.", "external_files": ["django.shortcuts", "drf_yasg.utils", "drf_yasg", "rest_framework", "rest_framework.decorators", "rest_framework.response", ".models", ".serializers", ".services"], "external_methods": ["get_object_or_404", "swagger_auto_schema", "openapi.Schema", "status.HTTP_200_OK", "status.HTTP_400_BAD_REQUEST"], "published": ["health", "ChatSessionViewSet", "MessageViewSet"], "classes": [{"name": "ChatSessionViewSet", "description": "A Django REST Framework ModelViewSet managing chat session lifecycle, including creation, retrieving history, session state, and sending user messages that trigger two-agent collaboration."}, {"name": "MessageViewSet", "description": "A read-only viewset for retrieving message data."}], "methods": [{"name": "health(request)", "description": "Health check endpoint returning server status.", "scope": "", "scopeKind": ""}, {"name": "create(self, request, *args, **kwargs)", "description": "Creates a new chat session.", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"name": "history(self, request, session_id=None)", "description": "Returns message history for a given chat session.", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"name": "state(self, request, session_id=None)", "description": "Returns current session info, agent assignments, and message count.", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"name": "send(self, request, session_id=None)", "description": "Handles sending a user message, triggers two-agent collaboration, returns updated messages.", "scope": "ChatSessionViewSet", "scopeKind": "class"}], "calls": ["get_object_or_404", "run_two_agent_collaboration", "MessageSerializer", "get", "filter", "order_by", "count", "Response", "super().create"], "search-terms": ["ChatSessionViewSet", "MessageViewSet", "two_agent_collaboration", "session_id", "health endpoint", "send message"], "state": 2, "file_id": 17, "knowledge_revision": 61, "git_revision": "ae6a3b26572fd1176f3b00860d419014c750cf27", "revision_history": [{"35": "35a6ac2c0f14471e71851183e5088af2119158e0"}, {"53": "35a6ac2c0f14471e71851183e5088af2119158e0"}, {"61": "ae6a3b26572fd1176f3b00860d419014c750cf27"}], "ctags": [{"_type": "tag", "name": "ChatSessionViewSet", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^class ChatSessionViewSet(viewsets.ModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MessageViewSet", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^class MessageViewSet(viewsets.ReadOnlyModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    def create(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^def health(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "history", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    def history(self, request, session_id=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, session_id=None)", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "lookup_field", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    lookup_field = \"session_id\"$/", "language": "Python", "kind": "variable", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    queryset = ChatSession.objects.all().order_by(\"-created_at\")$/", "language": "Python", "kind": "variable", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    queryset = Message.objects.all().order_by(\"created_at\", \"id\")$/", "language": "Python", "kind": "variable", "scope": "MessageViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "send", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    def send(self, request, session_id=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, session_id=None)", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    serializer_class = ChatSessionSerializer$/", "language": "Python", "kind": "variable", "scope": "ChatSessionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    serializer_class = MessageSerializer$/", "language": "Python", "kind": "variable", "scope": "MessageViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/crewai-collaborative-chatbot-system-36230-36240/chatbot_backend/api/views.py", "pattern": "/^    def state(self, request, session_id=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, session_id=None)", "scope": "ChatSessionViewSet", "scopeKind": "class"}], "hash": "383bbc6905eeb609440ff77fb5c0ba3a", "format-version": 4, "code-base-name": "chatbot_backend", "filename": "chatbot_backend/api/views.py", "fields": [{"name": "lookup_field = \"session_id\"", "scope": "ChatSessionViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = ChatSession.objects.all().order_by(\"-created_at\")", "scope": "ChatSessionViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = Message.objects.all().order_by(\"created_at\", \"id\")", "scope": "MessageViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = ChatSessionSerializer", "scope": "ChatSessionViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = MessageSerializer", "scope": "MessageViewSet", "scopeKind": "class", "description": "unavailable"}]}